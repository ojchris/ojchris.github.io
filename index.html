<!DOCTYPE html>
<html lang="en">
	<head>
 
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<title>Currency Converter When you need it!</title>
		<meta name="description" content="Currency Converter When you need it!">
		<meta name="keywords" content="Progressive Web App">
    
    
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,700" rel="stylesheet">

		<link rel="stylesheet" href="assets/css/bootstrap/bootstrap.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/fonts/ionicons/css/ionicons.min.css">
    
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    
    <link rel="stylesheet" href="assets/fonts/flaticon/font/flaticon.css">

    <link rel="stylesheet" href="assets/fonts/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="assets/css/select2.css">
    

    <link rel="stylesheet" href="assets/css/helpers.css">
    <link rel="stylesheet" href="assets/css/style.css">

  <script>
    

function processFormSubmit(){
  let https = require('https');
  //let https = 'https';
//create variable from element values
let amountToConvrt = document.querySelector('#origintAmt').value;
let fromCurrcy = document.querySelector('#fromBx  option:checked').value;
let toCurrcy = document.querySelector('#toBx  option:checked').value;

if(!!amountToConvrt && !!fromCurrcy && !!toCurrcy){

  convertCurrency(amountToConvrt, fromCurrcy, toCurrcy, function(err, amount) {
    //console.log(amount);
    //let convtnResult = amount;
    document.querySelector('resultAmount').value = amount;
  });
  
  function convertCurrency(amount, fromCurrency, toCurrency, cb) {
        //var apiKey = 'your-api-key-here';

        const fromCur = 'USD';
        const toCur = 'NGN';
        //let fromCurrency = encodeURIComponent(fromCur);
        //let toCurrency = encodeURIComponent(toCur);
        const query = `${fromCur}_${toCur}`;

        const url = `https://free.currencyconverterapi.com/api/v5/convert?q=${query}&compact=ultra`;
        fetch(url).then(response => response.json()).then(data => {
          let exchangeRate = data[query];
          let resultRate = exchangeRate * amountToConvrt;
          return resultRate;
        }).catch(() => {
          console.log('it failed');
          });

        
      }
  }
    
}

window.addEventListener('load', function () {
        fetch('https://free.currencyconverterapi.com/api/v5/currencies').then(function(response){

          return response.json();
          }).then(function(data){
          //let sortData = data.results;
          //let currencies = sortData.sort();
          let currencies = data.results;
          for(key in currencies){
            let currencyAbbr = currencies[key]['id'];
            let currencyNm = currencies[key]['currencyName'];
            let currencyCountry = `${currencyAbbr} - ${currencyNm}`;
            let selectOptn = `<option value="${currencyAbbr}">${currencyCountry}</option>`
            //console.log(selectOptn);
            document.querySelector('#fromBx').innerHTML += selectOptn;
            document.querySelector('#toBx').innerHTML += selectOptn;
          }

          }).catch(function(){
          console.log('it failed');
          });

      });

    </script>

	</head>
	<body>
  

 <!--   <nav class="navbar navbar-expand-lg navbar-dark probootstrap_navbar" id="probootstrap-navbar">
      <div class="container">
        <a class="navbar-brand" href="/">Places</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#probootstrap-menu" aria-controls="probootstrap-menu" aria-expanded="false" aria-label="Toggle navigation">
          <span><i class="ion-navicon"></i></span>
        </button>
        <div class="collapse navbar-collapse" id="probootstrap-menu">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active"><a class="nav-link" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="city-guides.html">City Guides</a></li>
            <li class="nav-item"><a class="nav-link" href="services.html">Services</a></li>
            <li class="nav-item"><a class="nav-link" href="travel.html">Travel With Us</a></li>
            <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- END nav --
  -->   

    <section class="probootstrap-cover overflow-hidden relative"  style="background-image: url('assets/images/bg_1.jpg');" data-stellar-background-ratio="0.5"  id="section-home">
      <div class="overlay"></div>
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-4">
            <h2 class="heading mb-2 display-4 font-light probootstrap-animate">Currency Converter When You Want it!</h2>
            <p class="lead mb-5 probootstrap-animate" style="width: 80%;">
              You have here a currency converter that helps to calculate exchange rate across over 150 world currencies. And it works even when you are offline!

            </p>
              <!--<a href="onepage.html" role="button" class="btn btn-primary p-3 mr-3 pl-5 pr-5 text-uppercase d-lg-inline d-md-inline d-sm-block d-block mb-3">Refresh page for Offline Access</a> -->
            
          </div> 
          <div class="col-md-8 probootstrap-animate">
            <div class="probootstrap-form">
              <div class="form-group">
                <div class="row mb-3">
                  <div class="col-md">
                    <div class="form-group">
                      <label for="id_label_single">From</label>

                      <label for="id_label_single" style="width: 100%;">
                        <select class="js-example-basic-single js-states form-control" id="fromBx" name="fromBx" style="width: 100%;">
                          
                        </select>
                      </label>


                    </div>
                  </div>
                  <div class="col-md">
                    <div class="form-group">
                      <label for="id_label_single2">To</label>
                      <div class="probootstrap_select-wrap">
                        <label for="id_label_single2" style="width: 100%;">
                        <select class="js-example-basic-single js-states form-control" id="toBx" name="toBx" style="width: 100%;">
                          
                        </select>
                      </label>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- END row -->
                <div class="row mb-5">
                  <div class="col-md">
                    <div class="form-group">
                      <label for="id_label_single2">Origin</label>
                      <div class="probootstrap-date-wrap">
                        
                      
                        <label for="id_label_single" style="width: 100%;">
                        <input type="number" class="form-control" name="originAmt" id="origintAmt" onchange="processFormSubmit()" placeholder="Enter Amount" style="    box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);">
                      </label>
                      </div>
                    </div>
                  </div>
                  <div class="col-md">
                    <div class="form-group">
                      <label for="probootstrap-date-arrival">Result</label>
                      <div class="probootstrap-date-wrap">
                         
                        <input type="number" class="form-control" name="resultAmt" id="resultAmt" placeholder="Enter Amount" style="    box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);">
                      </div>
                    </div>
                  </div>
                </div>
                <!-- END row -->
                <div class="row">
                  <div class="col-md">
                    <label for="round" class="mr-5">Press this 'Convert' button</label>
                    
                  </div>
                  <div class="col-md">
                    <input type="submit" value="Convert" id="convertBtn" name="convertBtn"  class="btn btn-primary btn-block">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    
    </section>
    <!-- END section -->
    

    
    
  

    <section class="probootstrap_section">
      <div class="container">
        <div class="row text-center mb-5 probootstrap-animate">
          <div class="col-md-12">
            <h2 class="display-4 border-bottom probootstrap-section-heading">About This App</h2>
          </div>
        </div>
      </div>
    </section>
        

    <section class="probootstrap-section-half d-md-flex" id="section-about">
      <div class="probootstrap-image probootstrap-animate" data-animate-effect="fadeIn" style="background-image: url(assets/images/img_2.jpg)"></div>
      <div class="probootstrap-text">
        <div class="probootstrap-inner probootstrap-animate" data-animate-effect="fadeInRight">
          <h2 class="heading mb-4">It's a jounrney!</h2>
          <p>This the first prograssive web app (PWA) out of my jounrney in returning to programming via the Google Africa Challenge, powered by the Andela Learning Community (TM) and the made possible by the Udacity curriculum and platform.</p>
          <p>It's the beginning of my new journey to modernize my skills while sharping my management capability in working with developers within my team.</p>
		  <p>Not complete because of the deadline but given another 24 hours I should be done.  Thanks!</p>
          <p><a href="#" class="btn btn-primary">Read More</a></p>
        </div>
      </div>
    </section>


   
    <!-- END section -->

    <footer class="probootstrap_section probootstrap-border-top">
      <div class="container">
        <div class="row mb-5">
          
        </div>
        <div class="row pt-5">
          <div class="col-md-12 text-center">
            <p class="probootstrap_font-14">&copy; 2018. All Rights Reserved. <br> Designed &amp; by <a href="https://probootstrap.com/" target="_blank">ProBootstrap</a> and developed by Designed &amp; by <a href="https://github.com/ojchris/" target="_blank">Ojchris</a><small> (Don't remove credit link on this footer. See <a href="https://probootstrap.com/license/">license</a>)</small></p>
            
          </div>
        </div>
      </div>
    </footer>

    
    <script src="assets/js/jquery.min.js"></script>
    
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>

    <script src="assets/js/bootstrap-datepicker.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/jquery.easing.1.3.js"></script>

    <script src="assets/js/select2.min.js"></script>

    <script src="assets/js/main.js"></script>
	</body>
</html>